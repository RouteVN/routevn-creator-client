refs:
  addNewButton:
    eventListeners:
      click:
        handler: handleAddNewClick
  sfx*:
    eventListeners:
      click:
        handler: handleSfxClick
      contextmenu:
        handler: handleSfxContextMenu
  resourceItem*:
    eventListeners:
      click:
        handler: handleResourceItemClick
  submitButton:
    eventListeners:
      click:
        handler: handleSubmitClick
  breadcumb:
    eventListeners:
      item-click:
        handler: handleBreadcumbClick
  buttonSelect:
    eventListeners:
      click:
        handler: handleButtonSelectClick
  form:
    eventListeners:
      form-field-event:
        handler: handleFormExtra
      form-change:
        handler: handleFormChange
  dropdownMenu:
    eventListeners:
      close:
        handler: handleDropdownMenuClose
      item-click:
        handler: handleDropdownMenuClickItem
template:
  - rtgl-view w=f h=f p=lg:
      - rtgl-view d=h g=md: null
      - rtgl-breadcrumb#breadcumb :items=breadcrumb: null
      - $if mode == 'current':
          - rtgl-form#form :form=form :defaultValues=defaultValues:
              - rtgl-view#sfxContainer slot=sfx g=md:
                  - $for sfx, i in defaultValues.sfx:
                      - rtgl-view g=sm:
                          - rtgl-view#sfx${i} data-sfx-id=${sfx.id} cur=pointer:
                              - rvn-waveform-visualizer waveformDataFileId=${sfx.waveformDataFileId} width=355 height=150: null
                          - rtgl-text w=355 ellipsis=true s=sm c=mu-fg: ${sfx.name}
                  - rtgl-button#addNewButton v=ol w=f mt=md: + Add New Sound Effect
          - rtgl-view flex=1: null
          - rtgl-view d=h av=c ah=e w=f g=lg:
              - rtgl-button#submitButton: Submit
      - $if mode == 'gallery':
          - 'rtgl-view d=h w=f g=lg mt=sm flex=1 style="min-height: 0;"':
              - rtgl-view h=f flex=1 sv:
                  - rvn-base-file-explorer#baseFileExplorer :items=items no-empty-message: null
              - rtgl-view h=f flex=2 sv g=lg:
                  - $for group, i in groups:
                      - rtgl-view g=md:
                          - rtgl-text: ${group.name}
                          - rtgl-view d=h w=f wrap g=lg:
                              - $for item, j in group.children:
                                  - rtgl-view#resourceItem${i}x${j} data-resource-id=${item.id} cur=pointer bw=${item.bw} bc=${item.bc} g=sm:
                                      - $if item.waveformDataFileId:
                                          - rvn-waveform-visualizer waveformDataFileId=${item.waveformDataFileId} width=225 h=120: null
                                          - rtgl-text s=sm ah=c: ${item.name}
                                        $else:
                                          - rtgl-view w=225 h=120 av=c ah=c bgc=ac:
                                              - rtgl-text s=sm c=mu-fg: No waveform
          - rtgl-view d=h av=c ah=e w=f g=lg:
              - rtgl-button#buttonSelect: Select
  - rtgl-dropdown-menu#dropdownMenu :items=dropdownMenu.items x=${dropdownMenu.position.x} y=${dropdownMenu.position.y} ?open=${dropdownMenu.isOpen}: null
