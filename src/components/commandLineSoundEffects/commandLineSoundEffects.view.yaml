elementName: rvn-command-line-sound-effects

viewDataSchema:
  type: object
  properties: {}

propsSchema:
  type: object
  properties:
    line:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          audioId:
            type: string
          trigger:
            type: string
          name:
            type: string

refs:
  add-new-button:
    eventListeners:
      click:
        handler: handleAddNewClick
  sound-effect-item-*:
    eventListeners:
      click:
        handler: handleSoundEffectItemClick
  delete-button-*:
    eventListeners:
      click:
        handler: handleDeleteClick
  audio-item-*:
    eventListeners:
      click:
        handler: handleAudioItemClick
  submit-button:
    eventListeners:
      click:
        handler: handleSubmitClick
  breadcumb:
    eventListeners:
      item-click:
        handler: handleBreadcumbClick
  button-select:
    eventListeners:
      click:
        handler: handleButtonSelectClickAudio
  trigger-select-*:
    eventListeners:
      change:
        handler: handleTriggerChange
  form:
    eventListeners:
      extra-event:
        handler: handleFormExtra
      form-change:
        handler: handleFormChange

template:
  - rtgl-view w=f h=f p=lg:
    - $if mode == 'current':
        - rtgl-view d=h g=md:
          - rtgl-breadcrumb#breadcumb .items=breadcrumb:
        - rtgl-text: Sound Effects

        # Form for sound effects
        - rtgl-form#form .form=form .defaultValues=defaultValues:
        
        # Add new button
        - rtgl-button#add-new-button v=ol w=f: + Add New Sound Effect

        - rtgl-view flex=1:
        - rtgl-view d=h av=c ah=e w=f g=lg:
          - rtgl-button#submit-button: Submit
      $elif mode == 'gallery':
        - rtgl-view d=h g=md:
          - rtgl-breadcrumb#breadcumb .items=breadcrumb:
        - 'rtgl-view d=h w=f g=lg flex=1 style="min-height: 0;"':
          - rtgl-view h=f flex=1 sv:
            - rvn-base-file-explorer#base-file-explorer .items=items:
          - rtgl-view h=f flex=2 sv g=lg:
            - $for group in groups:
              - rtgl-view g=md:
                - rtgl-text: ${group.name}
                - rtgl-view d=h w=f fw=w g=lg:
                  - $for item in group.children:
                    - rtgl-view#audio-item-${item.id} cur=p style="${item.selectedStyle}":
                      - $if item.waveformDataFileId:
                        - rtgl-view:
                          - rvn-waveform-visualizer waveformDataFileId=${item.waveformDataFileId} width=225 height=150:
                          - rtgl-text w=225 ellipsis=true mt=sm: ${item.name}
                        $else:
                        - rtgl-view w=225 h=150 av=c ah=c bgc=ac:
                          - rtgl-text s=sm c=mu-fg: No waveform
        - rtgl-view d=h av=c ah=e w=f g=lg:
          - rtgl-button#button-select: Select
