elementName: rvn-whiteboard

viewDataSchema:
  type: object
  properties:
    items:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          name:
            type: string
          x:
            type: number
          y:
            type: number
    isPanMode:
      type: boolean
    panX:
      type: number
    panY:
      type: number
    zoomLevel:
      type: number
    containerCursor:
      type: string
    itemCursor:
      type: string

propsSchema:
  type: object
  properties:
    items:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          name:
            type: string
          x:
            type: number
          y:
            type: number

refs:
  container:
    eventListeners:
      wheel:
        handler: handleContainerWheel
  canvas:
    eventListeners:
      mousedown:
        handler: handleCanvasMouseDown
  item-*:
    eventListeners:
      mousedown:
        required: true
        handler: handleItemMouseDown
      dblclick:
        handler: handleItemDoubleClick

template:
  - 'rtgl-view#container w=f h=f pos=rel bgc=bg style="overflow: hidden; min-height: 400px; cursor: ${containerCursor};"':
    - 'rtgl-view#canvas w=f h=f pos=rel bgc=co style="transform: translate(${panX}px, ${panY}px) scale(${zoomLevel}); transform-origin: 0 0; min-width: 100vw; min-height: 100vh;"':
      - $for item in items:
        - 'rtgl-view#item-${item.id} pos=abs w=120 h=60 bgc=mu bw=sm bc=ac br=md style="left: ${item.x}px; top: ${item.y}px; cursor: ${itemCursor}; z-index: 10; user-select: none;"':
          - rtgl-view w=f h=f av=c ah=c p=md:
            - rtgl-text s=sm: "${item.name}"