elementName: rvn-whiteboard

viewDataSchema:
  type: object
  properties:
    items:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          name:
            type: string
          x:
            type: number
          y:
            type: number
          borderColor:
            type: string
    selectedItemId:
      type: string
    isPanMode:
      type: boolean
    panX:
      type: number
    panY:
      type: number
    zoomLevel:
      type: number
    zoomLevelPercent:
      type: number
    containerCursor:
      type: string
    itemCursor:
      type: string

propsSchema:
  type: object
  properties:
    items:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          name:
            type: string
          x:
            type: number
          y:
            type: number
    initialZoomLevel:
      type: number
    cursor:
      type: string
    selectedItemId:
      type: string

refs:
  container:
    eventListeners:
      wheel:
        handler: handleContainerWheel
      mousedown:
        handler: handleContainerMouseDown
      contextmenu:
        handler: handleContainerContextMenu
  item-*:
    eventListeners:
      mousedown:
        required: true
        handler: handleItemMouseDown
      dblclick:
        handler: handleItemDoubleClick
      contextmenu:
        handler: handleItemContextMenu
  zoom-in-btn:
    eventListeners:
      click:
        handler: handleZoomInClick
  zoom-out-btn:
    eventListeners:
      click:
        handler: handleZoomOutClick

template:
  - 'rtgl-view#container w=f h=f pos=rel bgc=bg cur=${containerCursor} style="overflow: hidden; min-height: 400px;"':
    - 'rtgl-view#canvas w=f h=f pos=rel style="transform: translate(${panX}px, ${panY}px) scale(${zoomLevel}); transform-origin: 0 0; width: 0px; height: 0px;"':
      - $for item in items:
        - 'rtgl-view#item-${item.id} pos=abs w=120 h=60 bgc=mu bw=sm bc=${item.borderColor} br=md cur=${itemCursor} style="left: ${item.x}px; top: ${item.y}px; z-index: 10; user-select: none;"':
          - rtgl-view w=f h=f av=c ah=c p=md:
            - rtgl-text s=sm c=${item.textColor}: "${item.name}"
    - 'rtgl-view pos=abs z=100 ah=c p=md bgc=mu br=md style="right: 20px; bottom: 20px;"':
      - rtgl-view d=h av=c gap=sm:
        - 'rtgl-button#zoom-out-btn v=se s=md sq': "-"
        - 'rtgl-view bgc=co p=sm br=full w=50 ah=c av=c':
          - rtgl-text s=sm: "${zoomLevelPercent}%"
        - 'rtgl-button#zoom-in-btn v=se s=md sq': "+"
