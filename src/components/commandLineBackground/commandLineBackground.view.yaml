refs:
  rvnImageSelector:
    eventListeners:
      image-selected:
        handler: handleImageSelected
  resourceItem*:
    eventListeners:
      click:
        handler: handleResourceItemClick
  submitButton:
    eventListeners:
      click:
        handler: handleSubmitClick
  breadcumb:
    eventListeners:
      item-click:
        handler: handleBreadcumbActionsClick
  buttonSelect:
    eventListeners:
      click:
        handler: handleButtonSelectClick
  tabs:
    eventListeners:
      item-click:
        handler: handleTabClick
  form:
    eventListeners:
      form-field-event:
        handler: handleFormExtra
      form-change:
        handler: handleFormInputChange
  backgroundImage:
    eventListeners:
      click:
        handler: handleBackgroundImageClick
      contextmenu:
        handler: handleBackgroundImageRightClick
  baseFileExplorer:
    eventListeners:
      item-click:
        handler: handleFileExplorerClickItem
template:
  - rtgl-view w=f h=f p=lg:
      - rtgl-view d=h g=md: null
      - rtgl-breadcrumb#breadcumb :items=breadcrumb: null
      - $if mode == 'current':
          - rtgl-form#form :form=dialogueForm.form :defaultValues=dialogueForm.defaultValues:
              - $if selectedResource:
                  - $if selectedResource.resourceType == 'image':
                      - rvn-file-image#backgroundImage fileId=${selectedResource.fileId} w=355 h=200 slot=background cur=pointer: null
                    $elif selectedResource.resourceType == 'layout':
                      - rtgl-view#backgroundImage w=355 h=200 bgc=mu av=c ah=c cur=pointer slot=background bw=xs bc=mu br=sm:
                          - rtgl-view av=c ah=c:
                              - rtgl-text s=lg: ${selectedResource.name}
                              - rtgl-text s=sm c=mu-fg: ${selectedResource.layoutTypeDisplay}
                    $elif selectedResource.resourceType == 'video':
                      - rtgl-view#backgroundImage w=355 h=200 cur=pointer slot=background pos=rel:
                          - rvn-file-image fileId=${selectedResource.item.thumbnailFileId} w=355 h=200: null
                          - rtgl-view pos=abs w=f h=f av=c ah=c bgc=bg-60:
                              - rtgl-icon icon=play s=xl c=fg: null
                    $else:
                      - rtgl-view#backgroundImage w=355 h=200 bgc=mu av=c ah=c cur=pointer slot=background:
                          - rtgl-text s=md c=mu-fg: Select Background
                $else:
                  - rtgl-view#backgroundImage w=355 h=200 bgc=mu av=c ah=c cur=pointer slot=background:
                      - rtgl-text s=md c=mu-fg: Select Background
          - rtgl-view flex=1: null
          - rtgl-view d=h av=c ah=e w=f g=lg:
              - rtgl-button#submitButton: Submit
      - $if mode == 'gallery':
          - rtgl-tabs#tabs selected-tab=${tab} :items=tabs: null
          - 'rtgl-view d=h w=f g=lg mt=sm flex=1 style="min-height: 0;"':
              - rtgl-view h=f flex=1 sv:
                  - rvn-base-file-explorer#baseFileExplorer :items=items: null
              - rtgl-view h=f flex=2 sv g=lg:
                  - $if tab == 'image':
                      - rvn-image-selector#rvnImageSelector: null
                    $elif tab == 'layout':
                      - $for group in groups:
                          - rtgl-view g=md:
                              - rtgl-text: ${group.name}
                              - rtgl-view d=h w=f wrap g=lg:
                                  - $for item in group.children:
                                      - rtgl-view#resourceItem${item.id} w=200 h=150 ah=c av=c bw=${item.bw} bc=${item.bc} br=sm cur=pointer:
                                          - rtgl-view av=c ah=c:
                                              - rtgl-text s=md: ${item.name}
                                              - rtgl-text s=sm c=mu-fg: ${item.layoutTypeDisplay}
                    $elif tab == 'video':
                      - $for group in groups:
                          - rtgl-view g=md:
                              - rtgl-text: ${group.name}
                              - rtgl-view d=h w=f wrap g=lg:
                                  - $for item in group.children:
                                      - rtgl-view#resourceItem${item.id} w=200 h=150 cur=pointer g=sm bw=${item.bw} bc=${item.bc} br=sm:
                                          - rvn-file-image w=200 h=120 fileId=${item.thumbnailFileId}: null
                                          - rtgl-text s=sm ah=c: ${item.name}
          - rtgl-view d=h av=c ah=e w=f g=lg:
              - rtgl-button#buttonSelect: Select
