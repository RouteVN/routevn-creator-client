elementName: rvn-command-line-background

viewDataSchema:
  type: object
  properties: {}

propsSchema:
  type: object
  properties:
    existingBackground:
      type: object
      properties:
        imageId:
          type: string

refs:
  image-selector:
    eventListeners:
      click:
        handler: handleImageSelectorClick
  rvn-image-selector:
    eventListeners:
      image-selected:
        handler: handleImageSelected
  submit-button:
    eventListeners:
      click:
        handler: handleSubmitClick
  breadcumb-actions:
    eventListeners:
      click:
        handler: handleBreadcumbActionsClick
  breadcumb-background:
    eventListeners:
      click:
        handler: handleBreadcumbBackgroundClick
  button-select:
    eventListeners:
      click:
        handler: handleButtonSelectClickImage

template:
  - rtgl-view w=f h=f p=lg:
    - $if mode == 'current':
      - rtgl-view d=h g=md:
        - rtgl-text#breadcumb-actions s=sm c=mu-fg mb=lg cur=p: Actions
        - rtgl-text s=sm c=mu-fg mb=lg: '>'
        - rtgl-text s=sm c=mu-fg mb=lg: Background
      - rtgl-text: Incoming
      - $if selectedImageId:
          - rvn-file-image#image-selector fileId=${selectedFileId} w=345 h=200:
        $else:
          - rtgl-view#image-selector w=345 h=200 av=c ah=c bgc=ac cur=p: 
            - rtgl-text: Select Image
      - rtgl-view:
        - rtgl-text: Select Animation
        - rtgl-select .options=animationOptions:
      - rtgl-view flex=1:
      - rtgl-view d=h av=c ah=e w=f g=lg:
        - rtgl-button#reset-button v=ol: Reset
        - rtgl-button#submit-button: Submit

    - $if mode == 'gallery':
      - rtgl-view d=h g=md:
        - rtgl-text#breadcumb-actions s=sm c=mu-fg mb=lg cur=p: Actions
        - rtgl-text s=sm c=mu-fg mb=lg: '>'
        - rtgl-text#breadcumb-background s=sm c=mu-fg mb=lg cur=p: Background
        - rtgl-text s=sm c=mu-fg mb=lg: '>'
        - rtgl-text s=sm c=mu-fg mb=lg: Image Selection
      - 'rtgl-view d=h w=f g=lg flex=1 style="min-height: 0;"':
        - rtgl-view h=f flex=1 sv=true:
          - rvn-base-file-explorer#base-file-explorer .items=items:
        - rtgl-view h=f flex=2 sv=true g=lg:
          - rvn-image-selector .groups=groups .selectedImageId=tempSelectedImageId:
      - rtgl-view d=h av=c ah=e w=f g=lg:
        - rtgl-button#button-select: Select