elementName: rvn-file-explorer

viewDataSchema:
  type: object
  properties:
    items:
      type: array
      items:
        type: object
        properties:
          name:
            type: string
          type:
            type: string

propsSchema:
  type: object
  properties:
    items:
      type: array
      items:
        type: object
        properties:
          name:
            type: string
          id:
            type: string
          level:
            type: number

refs:
  item-*:
    eventListeners:
      mousedown:
        required: true
        handler: handleItemMouseDown
      contextmenu:
        handler: handleItemContextMenu
      click:
        handler: handleItemClick
  container:
    eventListeners:
      contextmenu:
        handler: handleContainerContextMenu

template:
  - rtgl-view w=f h=f p=md w=200 bwr=xs: 
    - rtgl-view w=f g=sm:
      - 'rtgl-view w=f h=f style="position: relative;"':
        - $for item, i in items:
            - rtgl-view#item-${item.id} w=f h=f p=md h=32 w=f cur=p av=c:
              - 'rtgl-text s=sm style="padding-left: ${item.level * 16}px;"': "${item.name}"
        - $if targetDragIndex != -2:
            - 'rtgl-view pos=abs w=200 bgc=ac h=2 style="top: ${32 * (targetDragIndex + 1)}px"':
    - rtgl-view#container w=f h=f:
