elementName: rvn-steps-editor

onMount:
  handler: handleOnMount

viewDataSchema:
  type: object
  properties:
    selectedStepId:
      type: string
    mode:
      type: string

propsSchema:
  type: object
  properties:
    steps:
      type: array
      items:
        type: object
        properties:

refs:
  container:
    eventListeners:
      keydown:
        handler: handleContainerKeyDown
  step-*:
    eventListeners:
      focus:
        handler: handleOnFocus
      input:
        handler: handleOnInput
      # mousedown:
      #   handler: handleBlockMouseDown
      mouseup:
        handler: handleStepMouseUp
      # beforeinput:
      #   handler: handleBlockBeforeInput
      # compositionend:
      #   handler: handleBlockCompositionEnd
      # compositionstart:
      #   handler: handleBlockCompositionStart
      keydown:
        handler: handleStepKeyDown

styles:
  'div[contenteditable="true"]:focus':
    outline: none

template:
  - 'rtgl-view#container w=f h=f tabindex=0 style="outline: none;"':
    - $for step, i in steps:
      - 'rtgl-view d=h w=f av=c style="background-color: ${step.backgroundColor};"':
        - rtgl-view h=f av=c w=32 ah=e mr=md:
          - rtgl-text s=sm c=${step.lineColor}: ${step.lineNumber}
        - rtgl-view wh=16 br=f mr=md:
        - 'div#step-${step.id} style="width: 100%;" contenteditable=true':
          - 'span style="font-size: 18px;"': ${step.instructions.presentationInstructions.dialogue.text}
