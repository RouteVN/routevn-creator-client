elementName: rvn-audio-player

propsSchema:
  type: object
  properties:
    fileId:
      type: string
      description: ID of the audio file to play
    fileName:
      type: string
      description: Name of the audio file to display
      default: ""
    autoPlay:
      type: boolean
      description: Whether to start playing automatically
      default: false

viewDataSchema:
  type: object
  properties:
    isPlaying:
      type: boolean
    isLoading:
      type: boolean
    currentTime:
      type: number
    duration:
      type: number
    currentTimeFormatted:
      type: string
    durationFormatted:
      type: string
    progressPercentage:
      type: number
    fileName:
      type: string

refs:
  play-pause-btn:
    eventListeners:
      click:
        handler: handlePlayPause
  progress-bar:
    eventListeners:
      click:
        handler: handleProgressBarClick
  playerCloser:
    eventListeners:
      click:
        handler: handleClose

template:
  - rtgl-view w=f h=64 p=md bgc=mu br=md bc=bo bw=xs:
    - $if isLoading:
        - rtgl-view w=f av=c p=md:
          - rtgl-text c=mu-fg: Loading audio...
      $else:
        - rtgl-view w=f g=md bgc=mu:
          # Progress bar
          - rtgl-view w=f:
            - 'rtgl-view#progress-bar w=f h=6 br=full cur=p pos=rel style="overflow: hidden;"':
              - 'rtgl-view h=f bgc=ac br=full style="width: ${progressPercentage}%; transition: width 0.1s ease;"':

          # Play/Pause button and time display
          - rtgl-view ph=md d=h g=md av=c w=f h=f:
            - rtgl-text w=250 ellipsis=true: ${fileName}
            - rtgl-view d=h av=c g=lg flex=1 ah=c:
              - rtgl-button#play-pause-btn w=40 h=40 bgc=pr br=full av=c ah=c:
                - $if isPlaying:
                    - rtgl-svg wh=16 svg=pause c=pr-fg:
                  $else:
                    - rtgl-svg wh=16 svg=play c=pr-fg:
              - rtgl-view d=h av=c g=sm:
                - rtgl-text s=sm c=mu-fg: ${currentTimeFormatted}
                - rtgl-text s=sm c=mu-fg: /
                - rtgl-text s=sm c=mu-fg: ${durationFormatted}
            - rtgl-svg#playerCloser svg=text w=30 h=30 :
          
          