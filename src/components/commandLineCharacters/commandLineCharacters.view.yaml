refs:
  addCharacterButton:
    eventListeners:
      click:
        handler: handleAddCharacterClick
  removeCharacter*:
    eventListeners:
      click:
        handler: handleRemoveCharacterClick
  character*:
    eventListeners:
      click:
        handler: handleCharacterClick
      contextmenu:
        handler: handleCharacterContextMenu
  spriteItem*:
    eventListeners:
      click:
        handler: handleSpriteItemClick
  submitButton:
    eventListeners:
      click:
        handler: handleSubmitClick
  breadcumb:
    eventListeners:
      item-click:
        handler: handleBreadcumbClick
  buttonSelect:
    eventListeners:
      click:
        handler: handleButtonSelectClick
  form:
    eventListeners:
      form-field-event:
        handler: handleFormExtra
      form-change:
        handler: handleFormChange
  dropdownMenu:
    eventListeners:
      close:
        handler: handleDropdownMenuClose
      item-click:
        handler: handleDropdownMenuClickItem
  transform*:
    eventListeners:
      value-change:
        handler: handleTransformChange
  characterItem*:
    eventListeners:
      click:
        handler: handleCharacterItemClick
template:
  - rtgl-view w=f h=f p=lg:
      - $if mode == 'current':
          - rtgl-view d=h g=md:
              - rtgl-breadcrumb#breadcumb :items=breadcrumb: null
          - rtgl-view flex=1 sv w=f:
              - rtgl-form#form :form=form :defaultValues=defaultValues:
                  - rtgl-view#charactersContainer slot=characters g=md w=f cur=pointer:
                      - $for character, i in defaultValues.characters:
                          - rtgl-view#character${character.id}${i} data-index=${i} d=h g=md av=t bgc=ac p=md br=md w=f:
                              - rtgl-view g=sm:
                                  - $if character.spriteFileId:
                                      - rvn-file-image fileId=${character.spriteFileId} w=120 h=120 br=sm: null
                                    $else:
                                      - rtgl-view w=120 h=120 av=c ah=c bgc=mu br=sm cur=pointer:
                                          - rtgl-text s=sm c=mu-fg: No Sprite
                                  - rtgl-text s=sm w=120 ah=c ellipsis=true: ${character.displayName}
                              - rtgl-view flex=1 g=sm:
                                  - rtgl-text s=sm c=mu-fg: Transform
                                  - rtgl-select#transform${i} :options=defaultValues.transformOptions :selectedValue=defaultValues.characters[${i}].transformId w=f: null
                      - rtgl-button#addCharacterButton v=ol w=f mt=md: + Add Character
          - rtgl-view d=h av=c ah=e w=f g=lg:
              - rtgl-button#submitButton: Submit
      - $if mode == 'character-select':
          - rtgl-view d=h g=md:
              - rtgl-breadcrumb#breadcumb :items=breadcrumb: null
          - 'rtgl-view d=h w=f g=lg flex=1 style="min-height: 0;"':
              - rtgl-view h=f flex=1 sv:
                  - rvn-base-file-explorer#baseFileExplorer :items=items no-empty-message: null
              - rtgl-view h=f flex=2 sv g=lg:
                  - $for group, i in groups:
                      - rtgl-view g=md:
                          - rtgl-text: ${group.name}
                          - rtgl-view d=h w=f wrap g=lg:
                              - $for item, j in group.children:
                                  - rtgl-view#characterItem${item.id} w=200 h=150 p=sm bgc=mu br=md cur=pointer key=${item.bw} bw=${item.bw}:
                                      - rtgl-view w=f h=f av=c ah=c g=sm:
                                          - $if item.fileId:
                                              - rvn-file-image fileId=${item.fileId} w=80 h=80 br=f: null
                                            $else:
                                              - rtgl-view w=80 h=80 bgc=ac av=c ah=c br=f:
                                                  - rtgl-text s=sm: No Avatar
                                          - rtgl-text: ${item.name}
      - $if mode == 'sprite-select':
          - rtgl-view d=h g=md:
              - rtgl-breadcrumb#breadcumb :items=breadcrumb: null
          - 'rtgl-view d=h w=f g=lg flex=1 style="min-height: 0;"':
              - rtgl-view h=f flex=1 sv:
                  - rvn-base-file-explorer#baseFileExplorer :items=spriteItems: null
              - rtgl-view h=f flex=2 sv g=lg:
                  - $for group, i in spriteGroups:
                      - rtgl-view g=md:
                          - rtgl-text: ${group.name}
                          - rtgl-view d=h w=f wrap g=lg:
                              - $for item, j in group.children:
                                  - rtgl-view#spriteItem${item.id} w=200 h=150 cur=pointer key=${item.bw} bw=${item.bw} bc=pr br=sm g=sm:
                                      - rvn-file-image fileId=${item.fileId} w=200 h=120: null
                                      - rtgl-text s=sm ah=c: ${item.name}
          - rtgl-view d=h av=c ah=e w=f g=lg:
              - rtgl-button#buttonSelect: Select
  - rtgl-dropdown-menu#dropdownMenu :items=dropdownMenu.items x=${dropdownMenu.position.x} y=${dropdownMenu.position.y} ?open=${dropdownMenu.isOpen}: null
