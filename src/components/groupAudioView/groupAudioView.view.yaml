elementName: rvn-group-audio-view

propsSchema:
  type: object
  properties:
    flatGroups:
      type: array
      description: Array of audio groups to display
    selectedItemId:
      type: string
      description: ID of currently selected item

refs:
  drag-drop-item-*:
    eventListeners:
      file-selected:
        handler: handleDragDropFileSelected
  drag-drop-bar-*:
    eventListeners:
      file-selected:
        handler: handleDragDropFileSelected
  group-*:
    eventListeners:
      click:
        handler: handleGroupClick
  audio-item-*:
    eventListeners:
      click:
        handler: handleAudioItemClick
      dblclick:
        handler: handleAudioItemDoubleClick
  playerCloser:
    eventListeners:
      click:
        handler: handleAudioPlayerClose

template:
  - 'rtgl-view w=f h=100vh g=lg style="overflow-y: scroll;"':
    - rtgl-view g=lg w=f:
      - 'rtgl-view h=48 w=f bgc=bg bwb=xs ph=md av=c style="position: sticky; top: 0px; z-index: 1000;"':
        # TODO implment search
        - rtgl-input#search-input s=sm placeholder="Search audios...": 
        # TODO implment zoom controls (increase/decrease audio size)
      - $for group in flatGroups:
        - rtgl-view w=f ph=md:
          - 'rtgl-view#group-${group.id} d=h w=f av=c bgc=bg cur=p style="position: sticky; top: 48px;"':
            - $if group.isCollapsed:
                - rtgl-svg wh=16 svg=folderArrowRight:
              $else:
                - rtgl-svg wh=16 svg=folderArrowDown:
            - rtgl-view d=h av=c g=md:
              - rtgl-svg wh=16 svg=folder:
              - rtgl-text: ${group.fullLabel}
          - $if !group.isCollapsed:
              - rtgl-view w=f mb=md p=sm:
                - rtgl-view d=h fw=w g=md:
                  - $if group.hasChildren:
                      - $for item in group.children:
                          - 'rtgl-view#audio-item-${item.id} cur=p style="${item.selectedStyle}"':
                            - rtgl-image br=md w=150 h=150 src=/public/project_logo_placeholder.png:
                      - rvn-drag-drop#drag-drop-item-${group.id} .uploadText=uploadText .acceptedFileTypes=acceptedFileTypes:
                    $else:
                      - rvn-drag-drop#drag-drop-item-${group.id} .uploadText=uploadText .acceptedFileTypes=acceptedFileTypes:
    - rtgl-view h=33vh:
    - $if showAudioPlayer:
      - 'rtgl-view pos=fix cor=bottom h=60 style="left: 305px; right: 285px;"':
        - rvn-audio-player fileId=${playingAudio.fileId} autoPlay=true: