elementName: rvn-command-line-choices

propsSchema:
  type: object
  properties:
    layouts:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          name:
            type: string
    line:
      type: object
      properties:
        presentation:
          type: object

viewDataSchema:
  type: object
  properties:
    layouts:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          name:
            type: string

refs:
  add-choice-button:
    eventListeners:
      click:
        handler: handleAddChoiceClick
  choice-*:
    eventListeners:
      click:
        handler: handleChoiceClick
      contextmenu:
        handler: handleChoiceContextMenu
  remove-choice-*:
    eventListeners:
      click:
        handler: handleRemoveChoiceClick
  cancel-edit-button:
    eventListeners:
      click:
        handler: handleCancelEditClick
  save-choice-button:
    eventListeners:
      click:
        handler: handleSaveChoiceClick
  choice-form:
    eventListeners:
      input:
        handler: handleChoiceFormInput
      form-change:
        handler: handleChoiceFormChange
  submit-button:
    eventListeners:
      click:
        handler: handleSubmitClick
  breadcumb:
    eventListeners:
      item-click:
        handler: handleBreadcumbClick
  form:
    eventListeners:
      extra-event:
        handler: handleFormExtra
      form-change:
        handler: handleFormChange
  dropdown-menu:
    eventListeners:
      close:
        handler: handleDropdownMenuClose
      click-item:
        handler: handleDropdownMenuClickItem

template:
  - rtgl-view w=f h=f p=lg:
      - $if mode == "list":
          - rtgl-view wh=f:
              - rtgl-view d=h g=md:
                  - rtgl-breadcrumb#breadcumb .items=breadcrumb:

              # Form for choices and layout
              - rtgl-view flex=1 sv w=f:
                  - rtgl-form#form .form=form .defaultValues=defaultValues .context=context:
                      - rtgl-view#choices-container slot=choices g=md w=f:
                          - $for item, index in defaultValues.items:
                              - rtgl-view#choice-${index} data-index=${index} d=h av=c w=f g=md p=sm bgc=mu br=sm cur=p:
                                  - rtgl-view flex=1 w=f:
                                      - rtgl-text: ${item.content}
                          - rtgl-button#add-choice-button v=ol w=f mt=md: + Add Choice

              - rtgl-view d=h av=c ah=e w=f g=lg:
                  - rtgl-button#submit-button: Submit
        $elif mode == "editChoice":
          - rtgl-view wh=f:
              - rtgl-view d=h g=md:
                  - rtgl-breadcrumb#breadcumb .items=breadcrumb:

              - rtgl-form#choice-form .form=choiceFormTemplate .defaultValues=editForm:

              - rtgl-view flex=1:
              - rtgl-view d=h av=c ah=e w=f g=lg:
                  - rtgl-button#cancel-edit-button v=ol: Cancel
                  - rtgl-button#save-choice-button: Save Choice

  - rtgl-dropdown-menu#dropdown-menu .items=dropdownMenu.items x=${dropdownMenu.position.x} y=${dropdownMenu.position.y} ?open=${dropdownMenu.isOpen}:
