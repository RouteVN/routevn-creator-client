elementName: rvn-command-line-choices

propsSchema:
  type: object
  properties:
    layouts:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          name:
            type: string
    line:
      type: object
      properties:
        presentation:
          type: object

viewDataSchema:
  type: object
  properties:
    layouts:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          name:
            type: string

refs:
  add-choice-button:
    eventListeners:
      click:
        handler: handleAddChoiceClick
  edit-choice-*:
    eventListeners:
      click:
        handler: handleEditChoiceClick
  remove-choice-*:
    eventListeners:
      click:
        handler: handleRemoveChoiceClick
  cancel-edit-button:
    eventListeners:
      click:
        handler: handleCancelEditClick
  save-choice-button:
    eventListeners:
      click:
        handler: handleSaveChoiceClick
  choice-form:
    eventListeners:
      input:
        handler: handleChoiceFormInput
      change:
        handler: handleChoiceFormChange
  layout-select:
    eventListeners:
      option-selected:
        handler: handleLayoutSelectChange
  submit-button:
    eventListeners:
      click:
        handler: handleSubmitClick
  breadcumb:
    eventListeners:
      item-click:
        handler: handleBreadcumbClick

template:
  - rtgl-view w=f h=f p=lg:
    - $if mode == "list":
      - rtgl-view wh=f:
        - rtgl-view d=h g=md:
          - rtgl-breadcrumb#breadcumb .items=breadcrumb:

        - rtgl-text mb=md: Choices Layout
        - rtgl-select#layout-select .options=layouts .selectedValue=selectedLayoutId mb=lg:

        - rtgl-text mb=md mt=md: Choices
        - rtgl-view g=md w=f:
          - $for choice, index in choices:
            - rtgl-view#edit-choice-${index} data-index=${index} d=h av=c w=f  g=md p=sm bgc=mu br=sm cur=p:
              - rtgl-view flex=1 w=f:
                - rtgl-text: ${choice.text}
                - rtgl-text s=xs c=mu-fg: ${choice.actionLabel}

          - rtgl-button#add-choice-button v=ol w=f: Add Choice

        - rtgl-view flex=1:
        - rtgl-view d=h av=c ah=e w=f g=lg:
          - rtgl-button#reset-button v=ol: Reset
          - rtgl-button#submit-button: Submit
      $elif mode == "editChoice":
        - rtgl-view wh=f:
          - rtgl-view d=h g=md:
            - rtgl-breadcrumb#breadcumb .items=breadcrumb:

          - rtgl-text mb=md: ${editModeTitle}

          - rtgl-form#choice-form .form=choiceFormTemplate .defaultValues=defaultValues:

          - rtgl-view flex=1:
          - rtgl-view d=h av=c ah=e w=f g=lg:
            - rtgl-button#cancel-edit-button v=ol: Cancel
            - rtgl-button#save-choice-button: Save Choice
