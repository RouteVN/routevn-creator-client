refs:
  groupItem*:
    eventListeners:
      click:
        handler: handleGroupItemClick
  selectItem*:
    eventListeners:
      value-change:
        handler: handleOptionSelected
  popoverForm:
    eventListeners:
      close:
        handler: handlePopverFormClose
  form:
    eventListeners:
      form-action:
        handler: handleFormActions
      form-change:
        handler: handlePopoverFormChange
  sectionAction*:
    eventListeners:
      click:
        handler: handleSectionActionClick
  systemActions:
    eventListeners:
      actions-change:
        handler: handleActionsChange
  listItem*:
    eventListeners:
      click:
        handler: handleListItemClick
      contextmenu:
        handler: handleListItemRightClick
  imageSelectorDialog:
    eventListeners:
      close:
        handler: handleImageSelectorCancel
  imageSelector:
    eventListeners:
      image-selected:
        handler: handleImageSelectorImageSelected
  confirmImageSelection:
    eventListeners:
      click:
        handler: handleImageSelectorSubmit
  cancelImageSelection:
    eventListeners:
      click:
        handler: handleImageSelectorCancel
  listBarItem*:
    eventListeners:
      click:
        handler: handleListBarItemClick
      contextmenu:
        handler: handleListBarItemRightClick
template:
  - $for section, i in config.sections:
      - $if i > 0:
          - rtgl-view h=1 w=f bgc=mu mv=lg: null
      - rtgl-view w=f g=md ph=md:
          - $if section.labelAction:
              - rtgl-view d=h w=f av=c:
                  - rtgl-text s=sm: ${section.label}
                  - rtgl-view w=1fg: null
                  - rtgl-button#sectionAction${i} data-id=${section.id} pre=${section.labelAction} sq s=sm v=gh: null
            $else:
              - rtgl-text s=sm: ${section.label}
          - $for item, j in section.items:
              - $if item.type == 'group':
                  - rtgl-view d=h w=f g=md av=c:
                      - $for field, k in item.fields:
                          - $if field.label:
                              - rtgl-text s=sm w=60: ${field.label}
                          - rtgl-view#groupItem${i}x${j}x${k} data-name=${field.name} w=1fg d=h pv=sm ph=md bgc=mu br=md av=c g=md cur=pointer bw=xs bc=bg h-bc=ac h=28:
                              - $if field.svg:
                                  - rtgl-svg svg=${field.svg} wh=16: null
                              - rtgl-text s=xs: ${field.value}
                $elif item.type == 'select':
                  - rtgl-view d=h av=c w=f:
                      - rtgl-text s=xs w=65: ${item.label}
                      - 'rtgl-view style="width: calc(100% - 65px);"':
                          - rtgl-select#selectItem${i}x${j} data-name=${item.name} w=f no-clear :selectedValue=#{item.value} :options=#{item.options}: null
                $elif item.type == 'list-item':
                  - $for listItem, k in item.items:
                      - rtgl-view#listItem${i}x${j}x${k} data-id=${listItem.id} d=h w=f g=md av=c p=md br=md bw=xs h-bgc=mu cur=pointer:
                          - rtgl-svg svg=${listItem.svg} wh=16: null
                          - rtgl-text s=xs: ${listItem.label}
                $elif item.type == 'list-bar':
                  - $for barItem, k in item.items:
                      - rtgl-view#listBarItem${i}x${j}x${k} data-name=${barItem.name} d=h w=f g=md av=c ph=md h-bgc=mu bw=xs br=md cur=pointer:
                          - rtgl-text s=xs: ${barItem.label}
                          - rtgl-view w=1fg: null
                          - $if barItem.imageId:
                              - rvn-file-image bw=xs bc=bo imageId=${barItem.imageId} h=32: null
                            $else:
                              - rtgl-view d=h av=c ah=c h=32 ph=sm bgc=mu br=sm:
                                  - rtgl-text s=xs c=mu: Not set
                $elif item.type == 'popover-input':
                  - rtgl-view#groupItem${i}x${j} data-name=${item.name} d=h pv=sm ph=md bgc=mu br=md av=c g=md cur=pointer bw=xs bc=bg h-bc=ac h=32 w=1fg:
                      - rtgl-text s=sm: ${item.value}
  - rtgl-view h=1 w=f bgc=mu mv=lg: null
  - rvn-system-actions#systemActions :actions=actionsData :actionType="'system'": null
  - rtgl-popover#popoverForm ?open=${popover.open} place=b x=${popover.x} y=${popover.y}:
      - $if popover.open:
          - rtgl-form#form autofocus key=${popover.key} slot=content :form=popover.form :defaultValues=popover.defaultValues :context=popover.context: null
  - rtgl-dialog#imageSelectorDialog ?open=${imageSelectorDialog.open}:
      - rtgl-view slot=content g=md:
          - rvn-image-selector#imageSelector: null
          - rtgl-view d=h g=sm w=f ah=e:
              - rtgl-button#cancelImageSelection variant=se: Cancel
              - rtgl-button#confirmImageSelection variant=pr: OK
