refs:
  searchInput:
    eventListeners:
      value-input:
        handler: handleSearchInput
  group*:
    eventListeners:
      click:
        handler: handleGroupClick
  variableItem*:
    eventListeners:
      click:
        handler: handleVariableItemClick
  addVariableButton*:
    eventListeners:
      click:
        handler: handleAddVariableClick
  addVariableEmpty*:
    eventListeners:
      click:
        handler: handleAddVariableClick
  addVariableDialog:
    eventListeners:
      close:
        handler: handleCloseDialog
  variableForm:
    eventListeners:
      form-action:
        handler: handleFormActionClick
      form-change:
        handler: handleDialogFormChange
  row*:
    eventListeners:
      click:
        handler: handleRowClick
      contextmenu:
        handler: handleRowContextMenu
  contextMenu:
    eventListeners:
      close:
        handler: handleCloseContextMenu
      item-click:
        handler: handleContextMenuClickItem
template:
  - 'rtgl-view w=f h=100vh g=lg style="overflow-y: scroll;"':
      - rtgl-view g=lg w=f h=f:
          - 'rtgl-view h=48 w=f bgc=bg bwb=xs ph=md av=c style="position: sticky; top: 0px; z-index: 1000;"':
              - rtgl-input#searchInput s=sm placeholder="Search variables..." value=${searchQuery}: null
          - $if flatGroups.length > 0:
              - $for group, i in flatGroups:
                  - rtgl-view w=f ph=md:
                      - 'rtgl-view#groupRef${i} data-group-id=${group.id} d=h w=f av=c bgc=bg cur=pointer style="position: sticky; top: 48px;"':
                          - rtgl-view w=f d=h av=c:
                              - $if group.isCollapsed:
                                  - rtgl-svg wh=16 svg=folderArrowRight: null
                                $else:
                                  - rtgl-svg wh=16 svg=folderArrowDown: null
                              - rtgl-view d=h av=c g=md:
                                  - rtgl-svg wh=16 svg=folder: null
                                  - rtgl-text: ${group.fullLabel}
                          - rtgl-button#addVariableButtonRef${i} data-group-id=${group.id} s=sm w=1fg ip=s icon=plus: Add
                      - $if !group.isCollapsed:
                          - rtgl-view w=f mb=md p=sm:
                              - $if group.hasChildren:
                                  - rtgl-view w=f:
                                      - rtgl-view d=h w=f pv=sm bwb=xs g=md:
                                          - rtgl-view w=2fg:
                                              - rtgl-text c=mu-fg s=sm: Name
                                          - rtgl-view w=1fg:
                                              - rtgl-text c=mu-fg s=sm: Scope
                                          - rtgl-view w=1fg:
                                              - rtgl-text c=mu-fg s=sm: Type
                                          - rtgl-view w=1fg:
                                              - rtgl-text c=mu-fg s=sm: Default
                                      - $for item, j in group.children:
                                          - $if item.isSelected:
                                              - rtgl-view#rowRef${i}x${j} data-item-id=${item.id} d=h w=f pv=md bwb=xs cur=pointer g=md bgc=mu br=sm:
                                                  - rtgl-view w=2fg:
                                                      - rtgl-text s=sm: ${item.name}
                                                  - rtgl-view w=1fg:
                                                      - rtgl-text s=sm: ${item.scope}
                                                  - rtgl-view w=1fg:
                                                      - rtgl-text s=sm: ${item.type}
                                                  - rtgl-view w=1fg:
                                                      - rtgl-text s=sm: ${item.default}
                                            $else:
                                              - rtgl-view#rowRef${i}x${j} data-item-id=${item.id} d=h w=f pv=md bwb=xs cur=pointer g=md:
                                                  - rtgl-view w=2fg:
                                                      - rtgl-text s=sm: ${item.name}
                                                  - rtgl-view w=1fg:
                                                      - rtgl-text s=sm: ${item.scope}
                                                  - rtgl-view w=1fg:
                                                      - rtgl-text s=sm: ${item.type}
                                                  - rtgl-view w=1fg:
                                                      - rtgl-text s=sm: ${item.default}
                                $else:
                                  - rtgl-view#addVariableEmptyRef${i} data-group-id=${group.id} w=f h=150 av=c ah=c g=md bw=xs bc=bo br=md cur=pointer:
                                      - rtgl-svg svg=plus wh=24: null
                                      - rtgl-text: Add Variable
            $elif searchQuery:
              - rtgl-view w=f h=400 av=c ah=c:
                  - rtgl-text s=lg c=mu-fg: No variables found matching "${searchQuery}"
            $else:
              - rtgl-view w=f h=f av=c ah=c:
                  - rtgl-text s=lg c=mu-fg: No data
                  - rtgl-view h=64: null
          - $if flatGroups.length > 0:
              - rtgl-view h=33vh: null
  - rtgl-dialog#addVariableDialog s=md ?open=${isDialogOpen}:
      - rtgl-view slot=content g=md:
          - rtgl-form#variableForm key=${isDialogOpen}-${defaultValues.type}-${defaultValues.default} :defaultValues=defaultValues :form=form w=f :context=context: null
  - rtgl-dropdown-menu#contextMenu :items=dropdownMenu.items ?open=${dropdownMenu.isOpen} x=${dropdownMenu.x} y=${dropdownMenu.y}: null
