refs:
  timelineContainer:
    eventListeners:
      mousemove:
        handler: handleMouseMove
      mouseleave:
        handler: handleMouseLeave
  addKeyframe*:
    eventListeners:
      click:
        handler: handleAddKeyframe
  keyframe*:
    eventListeners:
      contextmenu:
        handler: handleKeyframeRightClick
  propertyName*:
    eventListeners:
      contextmenu:
        handler: handlePropertyNameRightClick
  initialValue*:
    eventListeners:
      click:
        handler: handleInitialValueClick
template:
  - rtgl-view#timelineContainer g=md w=f pos=rel:
      - rtgl-view d=h w=f mb=sm:
          - rtgl-view w=f ah=e:
              - rtgl-text s=sm: 'Total duration: ${totalDuration}'
      - $if selectedProperties.length > 0:
          - $for property in selectedProperties:
              - rtgl-view d=h w=f av=c:
                  - rtgl-view w=72 av=c d=h:
                      - rtgl-view w=48 av=c d=h ah=c:
                          - rtgl-text#propertyName${property.name} s=xs cur=pointer: ${property.name}
                      - $if editable:
                          - rtgl-button#addKeyframe${property.name} s=sm w=16 v=gh cur=pointer ml=xs: +
                  - rtgl-view h=24 w=24 av=c ah=e mr=sm ml=sm:
                      - rtgl-text#initialValue${property.name} s=xs cur=pointer: ${property.initialValue}
                  - rtgl-view d=h w=f h=24 bgc=mu br=sm g=xs:
                      - $if property.keyframes && property.keyframes.length > 0:
                          - $for keyframe, j in property.keyframes:
                              - 'rtgl-view#keyframe${property.name}${j} data-property=${property.name} data-index=${j} d=h p=xs h=f bgc=ac br=sm ah=e av=e mr=xs style="width: ${keyframe.widthPercent}%"':
                                  - rtgl-text s=xs: ${keyframe.value}
                          - $if property.fillerWidthPercent && property.fillerWidthPercent > 0:
                              - 'rtgl-view d=h h=f style="width: ${property.fillerWidthPercent}%"': null
                        $else:
                          - rtgl-view d=h p=xs h=f flex=1 br=sm ah=c av=c:
                              - rtgl-text s=xs: No keyframes
