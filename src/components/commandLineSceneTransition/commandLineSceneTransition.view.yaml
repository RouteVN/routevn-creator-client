elementName: rvn-command-line-scene-transition

propsSchema:
  type: object
  properties:
    line:
      type: object
      properties:
        presentation:
          type: object
    sections:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          name:
            type: string

viewDataSchema:
  type: object
  properties: {}

refs:
  transition-selector:
    eventListeners:
      click:
        handler: handleTransitionSelectorClick
  scene-item-*:
    eventListeners:
      click:
        handler: handleSceneItemClick
  section-item-*:
    eventListeners:
      click:
        handler: handleSectionItemClick
  submit-button:
    eventListeners:
      click:
        handler: handleSubmitClick
  reset-button:
    eventListeners:
      click:
        handler: handleResetClick
  breadcumb-actions:
    eventListeners:
      click:
        handler: handleBreadcumbActionsClick
  breadcumb-transition:
    eventListeners:
      click:
        handler: handleBreadcumbTransitionClick
  animation-select:
    eventListeners:
      change:
        handler: handleAnimationSelectChange
  search-input:
    eventListeners:
      input:
        handler: handleSearchInput
  tab-section:
    eventListeners:
      click:
        handler: handleTabClick
  tab-scene:
    eventListeners:
      click:
        handler: handleTabClick

template:
  - rtgl-view w=f h=f p=lg:
    # Mode 1: Current transition selector
    - $if mode == 'current':
      - rtgl-view d=h g=md:
        - rtgl-text#breadcumb-actions s=sm c=mu-fg mb=lg cur=p: Actions
        - rtgl-text s=sm c=mu-fg mb=lg: '>'
        - rtgl-text s=sm c=mu-fg mb=lg: Transition
      
      - rtgl-text mb=md: 
          $if tab == 'section':
            Target Section
          $else:
            Target Scene
      - rtgl-view#transition-selector g=md d=h av=c ph=md bgc=mu h-bgc=ac br=md h=36 w=f cur=p mb=lg:
        - $if tab == 'section':
            - rtgl-svg svg=section wh=24:
          $else:
            - rtgl-svg svg=scene wh=24:
        - $if selectedName:
            - rtgl-text s=sm: ${selectedName}
          $else:
            - rtgl-text s=sm: 
                $if tab == 'section':
                  Select Section
                $else:
                  Select Scene
      
      - rtgl-text mb=md: Transition Animation
      - rtgl-select#animation-select .options=animationOptions .value=selectedAnimation mb=lg:
      
      - rtgl-view flex=1:
      - rtgl-view d=h av=c ah=e w=f g=lg:
        - rtgl-button#reset-button v=ol: Reset
        - rtgl-button#submit-button: Submit

    # Mode 2: Transition list with search and tabs
    - $if mode == 'gallery':
      - rtgl-view d=h g=md:
        - rtgl-text#breadcumb-actions s=sm c=mu-fg mb=lg cur=p: Actions
        - rtgl-text s=sm c=mu-fg mb=lg: '>'
        - rtgl-text#breadcumb-transition s=sm c=mu-fg mb=lg cur=p: Transition
        - rtgl-text s=sm c=mu-fg mb=lg: '>'
        - $if tab == 'section':
            - rtgl-text s=sm c=mu-fg mb=lg: Section Selection
          $else:
            - rtgl-text s=sm c=mu-fg mb=lg: Scene Selection
      
      # Tab selector
      - rtgl-view d=h g=lg mb=lg:
        - 'rtgl-view#tab-section d=h av=c ah=c px=lg py=sm bgc=${tab == "section" ? "ac" : "mu-bg"} cur=p':
          - 'rtgl-text c=${tab == "section" ? "primary" : "mu-fg"}': Sections
        - 'rtgl-view#tab-scene d=h av=c ah=c px=lg py=sm bgc=${tab == "scene" ? "ac" : "mu-bg"} cur=p':
          - 'rtgl-text c=${tab == "scene" ? "primary" : "mu-fg"}': Scenes
      
      # Search bar
      - rtgl-text mb=md: 
          $if tab == 'section':
            Search Sections
          $else:
            Search Scenes
      - rtgl-input#search-input .value=searchQuery placeholder="Type to search..." mb=lg:
      
      # List grouped by folders
      - rtgl-view h=f w=f g=sm sv:
        - $for group in groups:
          - rtgl-view g=md:
            - rtgl-text s=sm c=mu-fg mb=sm: ${group.name}
            - rtgl-view g=sm:
              - $for item in group.children:
                - $if tab == 'section':
                    - rtgl-view#section-item-${item.id} g=md d=h av=c ph=md bgc=mu h-bgc=ac br=md h=36 w=f cur=p:
                      - rtgl-svg svg=section wh=24:
                      - rtgl-text s=sm: ${item.name}
                  $else:
                    - rtgl-view#scene-item-${item.id} g=md d=h av=c ph=md bgc=mu h-bgc=ac br=md h=36 w=f cur=p:
                      - rtgl-svg svg=scene wh=24:
                      - rtgl-text s=sm: ${item.name}
