refs:
  addVisualButton:
    eventListeners:
      click:
        handler: handleAddVisualClick
  removeVisual*:
    eventListeners:
      click:
        handler: handleRemoveVisualClick
  visual*:
    eventListeners:
      click:
        handler: handleVisualClick
      contextmenu:
        handler: handleVisualContextMenu
  resourceItem*:
    eventListeners:
      click:
        handler: handleResourceItemClick
  submitButton:
    eventListeners:
      click:
        handler: handleSubmitClick
  breadcumb:
    eventListeners:
      item-click:
        handler: handleBreadcumbClick
  buttonSelect:
    eventListeners:
      click:
        handler: handleButtonSelectClick
  dropdownMenu:
    eventListeners:
      close:
        handler: handleDropdownMenuClose
      item-click:
        handler: handleDropdownMenuClickItem
  transform*:
    eventListeners:
      value-change:
        handler: handleTransformChange
template:
  - rtgl-view w=f h=f p=lg:
      - $if mode == 'current':
          - rtgl-view d=h g=md:
              - rtgl-breadcrumb#breadcumb :items=breadcrumb: null
          - rtgl-view flex=1 sv w=f:
              - rtgl-view g=md w=f:
                  - $for visual, i in defaultValues.visuals:
                      - rtgl-view#visual${i} data-index=${i} data-visual-id=${visual.id} d=h g=md av=t bgc=ac p=md br=md w=f:
                          - rtgl-view g=sm:
                              - $if visual.fileId:
                                  - rvn-file-image fileId=${visual.fileId} w=120 h=120 br=sm: null
                                $else:
                                  - rtgl-view w=120 h=120 av=c ah=c bgc=mu br=sm cur=pointer:
                                      - rtgl-text s=sm c=mu-fg: No Resource
                              - rtgl-text s=sm w=120 ah=c ellipsis=true: ${visual.displayName}
                              - $if visual.resourceType:
                                  - rtgl-text s=xs c=mu-fg ah=c: (${visual.resourceType})
                          - rtgl-view flex=1 g=sm:
                              - rtgl-text s=sm c=mu-fg: Transform
                              - rtgl-select#transform${i} :options=defaultValues.transformOptions :selectedValue=defaultValues.visuals[${i}].transformId w=f: null
                  - rtgl-button#addVisualButton v=ol w=f mt=md: + Add Visual
          - rtgl-view d=h av=c ah=e w=f g=lg:
              - rtgl-button#submitButton: Submit
      - $if mode == 'resource-select':
          - rtgl-view d=h g=md:
              - rtgl-breadcrumb#breadcumb :items=breadcrumb: null
          - 'rtgl-view d=h w=f g=lg flex=1 style="min-height: 0;"':
              - rtgl-view h=f flex=1 sv g=lg:
                  - $for group, i in resourceGroups:
                      - rtgl-view g=md:
                          - rtgl-text: ${group.name}
                          - rtgl-view d=h w=f wrap g=lg:
                              - $for item, j in group.children:
                                  - rtgl-view#resourceItem${i}x${j} data-resource-id=${item.id} w=200 h=150 cur=pointer key=${item.bw} bw=${item.bw} bc=pr br=sm g=sm:
                                      - $if item.previewFileId:
                                          - rvn-file-image fileId=${item.previewFileId} w=200 h=120: null
                                        $else:
                                          - rtgl-view w=200 h=120 bgc=mu av=c ah=c:
                                              - rtgl-text s=sm c=mu-fg: ${item.resourceType}
                                      - rtgl-text s=sm ah=c ellipsis=true: ${item.name}
          - rtgl-view d=h av=c ah=e w=f g=lg:
              - rtgl-button#buttonSelect: Select
  - rtgl-dropdown-menu#dropdownMenu :items=dropdownMenu.items x=${dropdownMenu.position.x} y=${dropdownMenu.position.y} ?open=${dropdownMenu.isOpen}: null
