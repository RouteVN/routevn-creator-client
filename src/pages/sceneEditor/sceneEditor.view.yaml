refs:
  linesEditor:
    eventListeners:
      editor-data-changed:
        handler: handleEditorDataChanged
      newLine:
        handler: handleNewLine
      splitLine:
        handler: handleSplitLine
      line-navigation:
        handler: handleLineNavigation
      mergeLines:
        handler: handleMergeLines
      delete-action:
        handler: handleLineDeleteActionItem
  sectionTab*:
    eventListeners:
      click:
        handler: handleSectionTabClick
      contextmenu:
        handler: handleSectionTabRightClick
  sectionAdd:
    eventListeners:
      click:
        handler: handleSectionAddClick
  sectionsOverview:
    eventListeners:
      click:
        handler: handleSectionsOverviewClick
  sectionsOverviewClose:
    eventListeners:
      click:
        handler: handleSectionsOverviewClose
  sectionOverviewRow*:
    eventListeners:
      click:
        handler: handleSectionsOverviewRowClick
  sectionsOverviewWarning*:
    eventListeners:
      mouseenter:
        handler: handleSectionsOverviewWarningMouseEnter
      mouseleave:
        handler: handleSectionsOverviewWarningMouseLeave
  dropdownMenu:
    eventListeners:
      close:
        handler: handleDropdownMenuClickOverlay
      item-click:
        handler: handleDropdownMenuClickItem
  popover:
    eventListeners:
      close:
        handler: handlePopoverClickOverlay
  form:
    eventListeners:
      form-action:
        handler: handleFormActionClick
  addActionsButton:
    eventListeners:
      click:
        handler: handleAddActionsButtonClick
  toggleSectionsGraphView:
    eventListeners:
      click:
        handler: handleToggleSectionsGraphView
  actionsDialog:
    eventListeners:
      close:
        handler: handleActionsDialogClose
  systemActions:
    eventListeners:
      submit:
        handler: handleCommandLineSubmit
      action-delete:
        handler: handleSystemActionsActionDelete
      actions-change:
        handler: handleCommandLineSubmit
  backButton:
    eventListeners:
      click:
        handler: handleBackClick
  previewButton:
    eventListeners:
      click:
        handler: handlePreviewClick
  muteToggle:
    eventListeners:
      click:
        handler: handleMuteToggle
  vnPreview:
    eventListeners:
      close:
        handler: handleHidePreviewScene
template:
  - rtgl-view w=f h=f:
      - rtgl-view bwb=xs w=f h=48 av=c ph=sm d=h:
          - rtgl-button#backButton sq pre="chevronLeft" v="gh" mr=sm: null
          - rtgl-view w=1fg:
              - rtgl-text c=mu-fg: ${scene.name}
          - rtgl-view w=1fg d=h g=sm jc=e:
              - rtgl-button#previewButton: Preview
          - rtgl-button#muteToggle sq v="gh" pre="${muteIcon}": null
      - 'rtgl-view d=h w=f h=1fg style="min-height: 0px"':
          - $if sectionsGraphView:
              - rtgl-view w="calc((100vw - 64px) / 2)":
                  - rtgl-view d=h w=f:
                      - rtgl-view w=1fg: null
                  - rtgl-view:
                      - rtgl-text: ${sectionsGraph}
            $else:
              - $if sectionsOverviewOpen:
                  - 'rtgl-view#sceneEditorLeftOverview w="calc((100vw - 64px) / 2)" d=v h=f style="min-height: 0px"':
                      - rtgl-view d=h av=c g=sm bwb=xs p=lg w=f:
                          - rtgl-text s=lg fw=600: Sections Overview
                          - rtgl-view w=1fg: null
                          - rtgl-button#sectionsOverviewClose v=gh: Close
                      - 'rtgl-view d=v w=f h=1fg sv p=md g=sm style="min-height: 0px;"':
                          - $for section, sectionIndex in sectionsOverviewItems:
                              - rtgl-view#sectionOverviewRow${sectionIndex} data-section-id=${section.id} w=f d=h av=c g=sm p=md cur=pointer bw=xs bc=${section.rowBc} bgc=${section.rowBgc} br=sm h-bgc=mu:
                                  - 'rtgl-text s=md c=${section.rowTextColor} w=1fg style="min-width: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"': ${section.name}
                                  - $if section.isDeadEnd:
                                      - rtgl-svg#sectionsOverviewWarning${sectionIndex} data-section-id=${section.id} svg=warning-dead-end wh=20: null
                $else:
                  - 'rtgl-view#sceneEditorLeftEditor w="calc((100vw - 64px) / 2)" d=v h=f style="min-height: 0px"':
                      - rtgl-view d=h g=xs w=f:
                          - rtgl-view d=h sh:
                              - rtgl-view d=h g=xs:
                              - $for section, sectionIndex in sections:
                                      - rtgl-view#sectionTab${sectionIndex} data-section-id=${section.id} w=120 h=32 av=c ph=lg ah=c bgc=${section.bgc} cur=pointer:
                                          - rtgl-text s=sm: ${section.name}
                          - rtgl-view#sectionAdd h=32 av=c ph=lg ah=c cur=pointer bgc=mu:
                              - rtgl-text s=sm: +
                          - rtgl-view#sectionsOverview h=32 av=c ph=lg ah=c cur=pointer bgc=mu:
                              - rtgl-text s=sm: ...
                          - rtgl-view w=1fg: null
                      - rtgl-view w=f p=md sv h=1fg:
                          - rvn-lines-editor#linesEditor :lines=currentLines :selectedLineId=selectedLineId :sectionLineChanges=sectionLineChanges: null
                          - rtgl-view h=30vh: null
          - rtgl-view w=1 h=f bgc=mu: null
          - rtgl-view w=f:
              - rtgl-view:
                  - rtgl-view w=700 h=400 bgc=fg pos=rel:
                      - 'div#canvas id=canvas style="width: 100%; height: 100%;display: flex;"': null
                      - $if isSceneAssetLoading:
                          - rtgl-view pos=abs cor=full bgc=bg op=0.7 av=c ah=c:
                              - rtgl-text s=sm: Loading assets...
              - rtgl-view w=f h=1 bgc=mu: null
              - rtgl-view w=f m=md:
                  - rtgl-view d=h av=c:
                      - rtgl-text s=sm c=mu-fg: State
                  - rtgl-view g=md w=f pv=md:
                      - rvn-system-actions#systemActions show-selected :actions=selectedLineActions :selectedLineId=selectedLineId :selectedLine=selectedLine :currentSceneId=scene.id action-type="presentation" :presentationState=presentationState: null
  - rtgl-dropdown-menu#dropdownMenu :items=dropdownMenu.items x=${dropdownMenu.position.x} y=${dropdownMenu.position.y} ?open=${dropdownMenu.isOpen}: null
  - rtgl-popover#popover ?open=${popover.isOpen} x=${popover.position.x} y=${popover.position.y}:
      - rtgl-form#form slot=content :form=form: null
  - rtgl-tooltip ?open=${deadEndTooltip.open} x=${deadEndTooltip.x} y=${deadEndTooltip.y} place="t" content="${deadEndTooltip.content}": null
  - $if previewVisible:
      - rvn-vn-preview#vnPreview scene-id="${previewSceneId}" section-id="${previewSectionId}" line-id="${previewLineId}": null
