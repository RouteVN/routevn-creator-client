elementName: rvn-images

dataSchema:
  type: object
  properties: {}

refs:
  fileexplorer:
    eventListeners:
      # targetchanged:
      #   handler: handleTargetChanged
      rightclick-container:
        handler: handleFileExplorerRightClickContainer
      rightclick-item:
        handler: handleFileExplorerRightClickItem
  dropdown-menu:
    eventListeners:
      click-overlay:
        handler: handleDropdownMenuClickOverlay
      click-item:
        handler: handleDropdownMenuClickItem
  asset-item-*:
    eventListeners:
      click:
        handler: handleAssetItemClick
  popover:
    eventListeners:
      click-overlay:
        handler: handlePopoverClickOverlay
  form:
    eventListeners:
      action-click:
        handler: handleFormActionClick
  drag-drop-item-*:
    eventListeners:
      file-selected:
        handler: handleDragDropFileSelected
  drag-drop-bar-*:
    eventListeners:
      file-selected:
        handler: handleDragDropFileSelected
  group-*:
    eventListeners:
      click:
        handler: handleGroupClick
  image-item-*:
    eventListeners:
      click:
        handler: handleImageItemClick

template: 
  - rtgl-view d=h w=f h=f: 
    - rtgl-view w=f h=f p=md w=200:
      - rvn-resource-types .resourceCategory=resourceCategory .selectedResourceId=selectedResourceId:
      - rvn-file-explorer#fileexplorer .items=flatItems:
    - 'rtgl-view w=f h=100vh g=lg style="overflow-y: scroll;"':
      - rtgl-view g=lg w=f:
        - $for group in flatGroups:
          - rtgl-view w=f:
            - 'rtgl-view#group-${group.id} d=h w=f g=md av=c bgc=bg cur=p style="position: sticky; top: 0;"':
              - $if group.isCollapsed:
                  - rtgl-svg wh=16 svg=folderArrowRight:
                $else:
                  - rtgl-svg wh=16 svg=folderArrowDown:
              - rtgl-svg wh=24 svg=folder:
              - rtgl-text s=h4: ${group.fullLabel}
            - $if !group.isCollapsed:
                - rtgl-view w=f:
                  - rtgl-view d=h g=md fw=w:
                    - $if group.hasChildren:
                        - $for item in group.children:
                            - 'rtgl-view#image-item-${item.id} cur=p style="${item.id === selectedItemId ? "outline: 2px solid var(--color-pr); outline-offset: 2px;" : ""}"':
                              - rtgl-image w=200 h=150 src="/public/project_logo_placeholder.png":
                      $else:
                        - rvn-drag-drop#drag-drop-item-${group.id}:
                - $if group.hasChildren:
                    - rvn-drag-drop-bar#drag-drop-bar-${group.id}:
    - rtgl-view w=f h=f p=md w=270 bwl=xs bc=bo:
      - $if selectedItem:
          - rtgl-image w=240 h=135 src=/public/project_logo_placeholder.png:
          - rtgl-text s=lg: Details
          - rtgl-text c=mu-fg: Name 
          - rtgl-text: ${selectedItem.name}
          - rtgl-text c=mu-fg: Type
          - rtgl-text: ${selectedItem.typeDisplay}
          - $if selectedItem.displayFileType:
              - rtgl-text c=mu-fg: File Type
              - rtgl-text: ${selectedItem.displayFileType}
          - $if selectedItem.displayFileSize:
              - rtgl-text c=mu-fg: File Size
              - rtgl-text: ${selectedItem.displayFileSize}
          - rtgl-text c=mu-fg: Path
          - rtgl-text s=sm: ${selectedItem.fullPath}
        $else:
          - rtgl-view h=f aj=c ai=c:
            - rtgl-text c=mu-fg s=lg: No selection
  - rtgl-dropdown-menu#dropdown-menu .items=dropdownMenu.items .position=dropdownMenu.position .isOpen=dropdownMenu.isOpen:
  - rtgl-popover#popover .isOpen=popover.isOpen .position=popover.position:
    - rtgl-form#form slot=content .form=form:
