refs:
  fileexplorer:
    eventListeners:
      data-changed:
        handler: handleDataChanged
  whiteboard:
    eventListeners:
      item-position-changed:
        handler: handleWhiteboardItemPositionChanged
      item-position-updating:
        handler: handleWhiteboardItemPositionUpdating
      item-selected:
        handler: handleWhiteboardItemSelected
      item-double-click:
        handler: handleWhiteboardItemDoubleClick
      canvas-click:
        handler: handleWhiteboardClick
      canvas-context-menu:
        handler: handleWhiteboardCanvasContextMenu
      item-delete:
        handler: handleWhiteboardItemDelete
      item-context-menu:
        handler: handleWhiteboardItemContextMenu
      zoom-changed:
        handler: handleWhiteboardZoomChanged
      pan-changed:
        handler: handleWhiteboardPanChanged
  addSceneBtn:
    eventListeners:
      click:
        handler: handleAddSceneClick
  detailForm:
    eventListeners:
      form-change:
        handler: handleFormChange
  sceneForm:
    eventListeners:
      form-action:
        handler: handleSceneFormAction
  sceneFormPopover:
    eventListeners:
      close:
        handler: handleSceneFormClose
  dropdownMenu:
    eventListeners:
      close:
        handler: handleDropdownMenuClose
      item-click:
        handler: handleDropdownMenuClickItem
  previewButton:
    eventListeners:
      click:
        handler: handleClickShowScenePreview
  sectionsListToggle:
    eventListeners:
      click:
        handler: handleSectionsListToggle
  sectionsListItem*:
    eventListeners:
      click:
        handler: handleSectionsListItemClick
  sectionsListWarning*:
    eventListeners:
      mouseenter:
        handler: handleDeadEndWarningMouseEnter
      mouseleave:
        handler: handleDeadEndWarningMouseLeave
  vnPreview:
    eventListeners:
      close:
        action: hidePreviewScene
template:
  - rtgl-view d=h w=f h=f:
      - rtgl-view d=h h=f w=f:
          - rvn-resizable-panel#fileExplorer w=300 min-w=200 max-w=500 resize-side="right":
              - rtgl-view slot="content" w=f h=f:
                  - rtgl-text ml=lg s=sm c=mu-fg mv=md: Scenes
                  - rvn-file-explorer#fileexplorer :items=flatItems :repositoryTarget=repositoryTarget: null
          - rtgl-view w=1fg h=f:
              - rvn-whiteboard#whiteboard :items=whiteboardItems :cursor=whiteboardCursor :selectedItemId=selectedItemId: null
          - rvn-resizable-panel panel-type=detail-panel w=270 min-w=200 max-w=500 resize-side="left":
              - rtgl-view wh=f slot="content":
                  - $if selectedItemId:
                      - rtgl-form#detailForm key=${selectedItemId} w=f h=f :form=form :context=context :defaultValues=defaultValues:
                          - rtgl-button#previewButton slot="preview" data-scene-id="${selectedItemId}": Preview
                          - rtgl-view slot="sections-list" d=v w=f g=sm:
                              - rtgl-view#sectionsListToggle d=h av=c ph=md bw=xs bc=mu bgc=bg h-bgc=mu br=sm h=36 w=f cur=pointer:
                                  - rtgl-text s=sm w=f: Sections List
                              - $if sectionsListOpen:
                                  - $if selectedSceneSections.length == 0:
                                      - rtgl-view d=h av=c ph=md bw=xs bc=mu bgc=bg br=sm h=36 w=f:
                                          - rtgl-text s=sm c=mu-fg: No sections
                                    $else:
                                      - rtgl-view d=v w=f:
                                          - $for section, sectionIndex in selectedSceneSections:
                                              - rtgl-view#sectionsListItem${sectionIndex} data-scene-id="${selectedItemId}" data-section-id="${section.id}" d=h av=c ph=md bw=xs bc=mu bgc=bg h-bgc=mu br=sm h=36 w=f cur=pointer:
                                                  - 'rtgl-text s=sm ellipsis=true w=f style="min-width: 0"': ${section.name}
                                                  - $if section.isDeadEnd:
                                                      - rtgl-svg#sectionsListWarning${sectionIndex} svg=warning-dead-end wh=16: null
                    $else:
                      - rtgl-view wh=f av=c ah=c bgc=mu-fg:
                          - rtgl-text s=md c=mu-fg: No selection
      - 'rtgl-view pos=abs z=100 ah=c p=md bgc=mu br=md style="left: 50%; transform: translateX(-50%); bottom: 20px;"':
          - rtgl-view d=h av=c:
              - rtgl-button#addSceneBtn pre="plus" s=md v=${addSceneButtonVariant}: Add Scene
      - rtgl-popover#sceneFormPopover ?open=${showSceneForm} x=${sceneFormPosition.x} y=${sceneFormPosition.y}:
          - rtgl-form#sceneForm key=${showSceneForm} slot=content :form=sceneFormFields w=320: null
      - rtgl-dropdown-menu#dropdownMenu :items=dropdownMenu.items x=${dropdownMenu.position.x} y=${dropdownMenu.position.y} ?open=${dropdownMenu.isOpen}: null
      - rtgl-tooltip ?open=${deadEndTooltip.open} x=${deadEndTooltip.x} y=${deadEndTooltip.y} place="t" content="${deadEndTooltip.content}": null
  - $if previewVisible:
      - rvn-vn-preview#vnPreview scene-id="${previewSceneId}": null
