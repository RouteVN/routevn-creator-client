elementName: rvn-projects

viewDataSchema:
  type: object
  properties:
    title:
      type: string
      default: Projects
    createButtonText:
      type: string
      default: Create Project
    projects:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          name:
            type: string
            default: Project 1
          description:
            type: string
            default: Project 1 description
    projectPath:
      type: string
      default: ""

refs:
  createButton:
    eventListeners:
      click:
        required: true
        handler: handleCreateButtonClick
  project-*:
    eventListeners:
      click:
        required: true
        handler: handleProjectsClick
      contextmenu:
        handler: handleProjectContextMenu
  create-project-dialog:
    eventListeners:
      close:
        handler: handleCloseDialogue
  form:
    eventListeners:
      action-click:
        handler: handleFormSubmit
  browseButton:
    eventListeners:
      click:
        handler: handleBrowseFolder
  dropdown-menu:
    eventListeners:
      close:
        handler: handleDropdownMenuClose
      click-item:
        handler: handleDropdownMenuClickItem

template:
  - rtgl-view h=100vh w=100vw ah=c:
    - rtgl-view sm-w=f w=400:
      - rtgl-view d=h w=f av=c mb=xl mt=xl:
        - rtgl-text s=h2: "${title}"
        - rtgl-view flex=1:
        - rtgl-button#createButton: ${createButtonText}
      - rtgl-view w=f g=md:
        - $for project, i in projects:
            - rtgl-view#project-${project.id} h=auto w=f bw=xs p=md cur=p:
              - rtgl-text s=lg: "${project.name}"
              #- rtgl-text s=sm: "${project.description}"
              - rtgl-text s=sm: "${project.projectPath}"

  - rtgl-dialog#create-project-dialog ?open=${isOpen} s=md:
    - rtgl-view slot=content g=md:
      - rtgl-form#form .defaultValues=defaultValues .form=form w=f:
        - rtgl-view w=f slot=project-path-selector d=h g=sm av=c:
          - rtgl-input#pathInput w=f .value=projectPathDisplay disabled=true placeholder="No folder selected":
          - rtgl-button#browseButton variant=se: Browse
  
  - rtgl-dropdown-menu#dropdown-menu ?open=${dropdownMenu.isOpen} x=${dropdownMenu.x} y=${dropdownMenu.y} .items=dropdownMenu.items:
