refs:
  leftPanel:
    eventListeners:
      data-changed:
        handler: handleDataChanged
  saveVersionBtn:
    eventListeners:
      click:
        handler: handleSaveVersionClick
  versionForm:
    eventListeners:
      form-action:
        handler: handleVersionFormAction
  versionFormPopover:
    eventListeners:
      close:
        handler: handleVersionFormClose
  versionMoreBtnRef*:
    eventListeners:
      click:
        handler: handleVersionContextMenu
  versionDownloadRef*:
    eventListeners:
      click:
        handler: handleDownloadZipClick
  dropdownMenu:
    eventListeners:
      close:
        handler: handleDropdownMenuClose
      item-click:
        handler: handleDropdownMenuClickItem
template:
  - rtgl-view d=h w=f h=f:
      - rvn-resizable-panel#fileExplorer w=300 min-w=200 max-w=500 resize-side="right":
          - rtgl-view slot="content" w=f h=f:
              - rvn-resource-types :resourceCategory=resourceCategory :selectedResourceId=selectedResourceId: null
      - rtgl-view w=1fg p=lg d=v g=lg:
          - rtgl-text s=h2: Versions
          - rtgl-button#saveVersionBtn v=pr s=md: Create new version
          - rtgl-view w=f g=md h=1fg oy=a:
              - $if versions.length == 0:
                  - rtgl-view w=f h=200 ah=c av=c:
                      - rtgl-view d=v ah=c g=md:
                          - rtgl-text s=lg c=mu-fg: No versions saved yet
                          - rtgl-text s=sm c=mu-fg: Save your first version to track changes
                $else:
                  - $for item, i in versions:
                      - rtgl-view h=auto w=f bw=xs pt=md pb=sm ph=lg d=h av=c:
                          - rtgl-view w=1fg d=v g=xs:
                              - rtgl-text s=lg: ${item.name}
                              - rtgl-view d=h g=sm av=c:
                                  - rtgl-text s=xs c=mu-fg: Action ${item.actionIndex} â€¢ ${item.formattedCreatedAt}
                                  - rtgl-button#versionDownloadRef${i} data-version-id="${item.id}" v=gh s=sm ip=s icon=download: Download Zip
                          - rtgl-view d=v g=xs:
                              - rtgl-button#versionMoreBtnRef${i} data-version-id="${item.id}" v=gh sq icon=ellipsis: null
      - rtgl-popover#versionFormPopover ?open=${showVersionForm} x=300 y=100:
          - rtgl-form#versionForm key=${showVersionForm} slot=content :form=versionFormFields w=320: null
  - rtgl-dropdown-menu#dropdownMenu ?open=${dropdownMenu.isOpen} x=${dropdownMenu.x} y=${dropdownMenu.y} :items=dropdownMenu.items: null
